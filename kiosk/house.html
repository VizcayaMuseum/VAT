<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Vizcaya Museum &amp; Gardens</title>

		<meta name="keywords" content="Vizcaya Museum &amp; Gardens" />
		<meta name="medium" content="mult" />
		<meta name="video_height" content="480"></meta>
		<meta name="video_width" content="640"></meta>
		<link rel="image_src" href="indexdata/thumbnail.jpg" />
		<!-- <meta name="directory" content="PATH/"></meta> -->
		<!-- <link rel="target_url" href="index.html" /> -->

		<meta name="author" content="Regal 360" />

		<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"/>
		<meta name="apple-mobile-web-app-capable" content="yes"/>
		<meta name="apple-mobile-web-app-status-bar-style" content="default">
		<style type="text/css">
			@-ms-viewport { width: device-width; }
			@media only screen and (min-device-width: 800px) { html { overflow:hidden; } }
			* { padding: 0; margin: 0; }
			html { height: 100%; }
			body { height: 100%; overflow:hidden; }
			@media only screen and (min-device-width : 320px) and (max-device-width : 568px) and (-webkit-min-device-pixel-ratio: 2) { body{ height: 100.18%; } }
			div#container { height: 100%; min-height: 100%; width: 100%; margin: 0 auto; }
			div#tourDIV {
				height:100%;
				position:relative;
				overflow:hidden;
			}
			div#panoDIV {
				height:100%;
				position:relative;
				overflow:hidden;
				-webkit-user-select: none;
				-khtml-user-select: none;
				-moz-user-select: none;
				-o-user-select: none;
				user-select: none;
			}
		</style>
				<!--[if !IE]><!-->
		<script type="text/javascript" src="indexdata/lib/jquery-2.1.1.min.js"></script>
		<!--<![endif]-->
		<!--[if lte IE 8]>
		<script type="text/javascript" src="indexdata/lib/jquery-1.11.1.min.js"></script>
		<![endif]-->
		<!--[if gt IE 8]>
		<script type="text/javascript" src="indexdata/lib/jquery-2.1.1.min.js"></script>
		<![endif]-->

		<link type="text/css" href="indexdata/lib/jquery-ui-1.11.1/jquery-ui.min.css" rel="stylesheet" />
		<link type="text/css" href="../css/house.css" rel="stylesheet" />
		<script type="text/javascript" src="indexdata/lib/jquery-ui-1.11.1/jquery-ui.min.js"></script>
		<script type="text/javascript" src="indexdata/lib/jquery.ui.touch-punch.min.js"></script>
		<script type="text/javascript" src="indexdata/lib/Kolor/KolorTools.min.js"></script>
		<script type="text/javascript" src="indexdata/graphics/KolorBootstrap.js"></script>

		<style type="text/css">
			div#panoDIV.cursorMoveMode {
				cursor: move;
				cursor: url(indexdata/graphics/cursors_move_html5.cur), move;
			}
			div#panoDIV.cursorDragMode {
				cursor: grab;
				cursor: -moz-grab;
				cursor: -webkit-grab;
				cursor: url(indexdata/graphics/cursors_drag_html5.cur), default;
			}
		</style>

		<script type="text/javascript">
			function webglAvailable() {
				try {
					var canvas = document.createElement("canvas");
					return !!window.WebGLRenderingContext && (canvas.getContext("webgl") || canvas.getContext("experimental-webgl"));
				} catch(e) {
					return false;
				}
			}
			function getWmodeValue() {
				var webglTest = webglAvailable();
				if(webglTest){
					return 'direct';
				}
				return 'opaque';
			}
			function readDeviceOrientation() {
				// window.innerHeight is not supported by IE
				var winH = window.innerHeight ? window.innerHeight : jQuery(window).height();
				var winW = window.innerWidth ? window.innerWidth : jQuery(window).width();
				//force height for iframe usage
				if(!winH || winH == 0){
					winH = '100%';
				}
				// set the height of the document
				jQuery('html').css('height', winH);
				// scroll to top
				window.scrollTo(0,0);
			}
			jQuery( document ).ready(function() {
				if (/(iphone|ipod|ipad|android|iemobile|webos|fennec|blackberry|kindle|series60|playbook|opera\smini|opera\smobi|opera\stablet|symbianos|palmsource|palmos|blazer|windows\sce|windows\sphone|wp7|bolt|doris|dorothy|gobrowser|iris|maemo|minimo|netfront|semc-browser|skyfire|teashark|teleca|uzardweb|avantgo|docomo|kddi|ddipocket|polaris|eudoraweb|opwv|plink|plucker|pie|xiino|benq|playbook|bb|cricket|dell|bb10|nintendo|up.browser|playstation|tear|mib|obigo|midp|mobile|tablet)/.test(navigator.userAgent.toLowerCase())) {
					// add event listener on resize event (for orientation change)
					if (window.addEventListener) {
						window.addEventListener("load", readDeviceOrientation);
						window.addEventListener("resize", readDeviceOrientation);
						window.addEventListener("orientationchange", readDeviceOrientation);
					}
					//initial execution
					setTimeout(function(){readDeviceOrientation();},10);
				}
			});
			
			function accessWebVr(){
				unloadPlayer();

				eventUnloadPlugins();

				setTimeout(function(){ loadPlayer(true); }, 100);
			}
			function accessStdVr(){
				unloadPlayer();

				resetValuesForPlugins();

				setTimeout(function(){ loadPlayer(false); }, 100);
			}
			function loadPlayer(isWebVr) {
				if (isWebVr) {
					embedpano({
						id:"krpanoSWFObject"
						,xml:"indexdata/index_vr.xml"
						,target:"panoDIV"
						,passQueryParameters:true
						,bgcolor:"#000000"
						,html5:"only+webgl"
						,vars:{skipintro:true,norotation:true}
					});
				} else {
					embedpano({
						id:"krpanoSWFObject"

						,xml:"indexdata/index.xml"

						,target:"panoDIV"
						,passQueryParameters:true
						,bgcolor:"#000000"

						,html5:"only"


					});
				}
				//apply focus on the visit if not embedded into an iframe
				if(top.location === self.location){
					kpanotour.Focus.applyFocus();
				}
			}
			function unloadPlayer(){
				if(jQuery('#krpanoSWFObject')){
					removepano('krpanoSWFObject');
				}
			}
		</script>
	</head>
	<body>
		<div id="container">
			<div id="tourDIV">
				<div id="panoDIV">
					<noscript>
						You must activate javascript to visualize the Virtual Tour : Vizcaya Museum &amp; Gardens.
					</noscript>
				</div>

				<!-- KolorMap container -->
				<div id="mapcontainer">
					<div id="mapDIV"></div>
				</div>

				<div id="startscreen" style="position: absolute;  top: 0; left: 0; height: 100%; width: 100%;  margin: 0; padding: 0; z-index:15000;  ">   <div id="ssTitleCont" style="display: none; width: auto; position: absolute; z-index: 16100; ">  </div>   <div id="btnDIV" style="display: none;"> <img id="ss-btn" style=" cursor: pointer; width: 1920px; height: 1200px;" src="indexdata/graphics/alpo.start.screen-v1.0.4/vizcaya_splash.png" /> </div>  </div>

				<script type="text/javascript">
					$(document).ready(function () {
						// hide start screen from the beginning 
						hidestartscreen();

						/*
						$('#startscreen').css('background-color', ssConvertedColor);
						$('#btnDIV').appendTo('#startscreen');
						$('#btnDIV').css({
							'width': 'auto',
							'position': 'absolute',
							'z-index': '16000'
						});
						$("#ss-btn").click(function () {
							hidestartscreen();
						});
						*/
						
						setTimeout(function () {
							$('#ssTitleCont').fadeIn('slow');
							$('#btnDIV img').load(function () {
								setStartBtnPos();
							});
							startResize();
							$(window).trigger('resize');
						}, 500);
						$('.sk-rotating-plane').css({
							'background-color': '#ffffff'
						});
					});

					function hideLoadingAnim() {
						var animDiv = $('#animDIV');
						animDiv.fadeOut('slow', function () {
							animDiv.remove()
						});
					}
					var spinkitCSS = document.createElement('link');
					spinkitCSS.rel = "stylesheet";
					spinkitCSS.href = "indexdata/graphics/1-rotating-plane.css";
					document.head.appendChild(spinkitCSS);

					function startResize() {
						$(window).resize(reposer);
					};

					function endResize() {
						$(window).off("resize", reposer);
					};

					function reposer() {
						setTitlePos();
						setStartBtnPos();
					};
					var ssConvertedColor = convertHex('#ffffff', '0.98');

					function hidestartscreen() {
						$("#startscreen").fadeOut('slow');
						invokeKrFunction('onHideSs');
					};

					function showbtn() {
						$('#btnDIV').fadeIn('slow');
					};

					function convertHex(hex, opacity) {
						hex = hex.replace('#', '');
						r = parseInt(hex.substring(0, 2), 16);
						g = parseInt(hex.substring(2, 4), 16);
						b = parseInt(hex.substring(4, 6), 16);
						result = 'rgba(' + r + ',' + g + ',' + b + ',' + opacity + ')';
						return result;
					};

					function setTitlePos() {
						var hPos = $('#startscreen').width() * 0.01 * 50;
						var vPos = 0;
						var hShift = hPos - $('#ssTitleCont').width() / 2;
						$('#ssTitleCont').css({
							'left': hShift + 'px'
						});
						$('#ssTitleCont').css({
							'top': vPos + 'px'
						});
					};

					function setStartBtnPos() {
						var hPos = $('#startscreen').width() * 0.01 * 50;
						var vPos = $('#startscreen').height() * 0.01 * 50;
						var hShift = hPos - $('#btnDIV').width() / 2;
						$('#btnDIV').css({
							'left': hShift + 'px'
						});;
						var vShift = vPos - $('#btnDIV').height() / 2;
						$('#btnDIV').css({
							'top': vShift + 'px'
						});
					};
				</script>

				<script type="text/javascript" src="indexdata/index.js"></script>
				<script type="text/javascript">
					accessStdVr();
				</script>
			</div>
		</div>
	</body>
</html>